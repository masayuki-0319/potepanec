<div class="col-md-3 col-sm-4 col-xs-12 sideBar">
  <div class="panel panel-default">
    <div class="panel-heading">商品カテゴリー</div>
    <div class="panel-body">
      <div class="collapse navbar-collapse navbar-ex1-collapse navbar-side-collapse">
        <ul class="nav navbar-nav side-nav">
          <% taxonomies.each do |taxonomy| %>
            <li>
              <a href="javascript:;" data-toggle="collapse" data-target="#taxonomy-<%= taxonomy.id %>"><%= taxonomy.name %><i class="fa fa-plus"></i></a>
              <ul id="taxonomy-<%= taxonomy.id %>" class="collapse collapseItem">
                <% taxonomy.root.children.each do |taxon| %>
                  <% if taxon.child_ids.blank? %>
                  <!-- depth=1の子ノードを展開 -->
                    <li>
                      <a href="<%= potepan_category_path(taxon_id: taxon.id, view_type: view_type) %>">
                        <i class="fa fa-caret-right" aria-hidden="true"></i>
                        <%= taxon.name %> <span>( <%= taxon.product_ids.count %> )</span>
                      </a>
                    </li>
                  <% else %>
                  <!-- depth=2以上の子ノードを展開 -->
                    <li>
                      <a href="javascript:;" data-toggle="collapse" data-target="#taxon-<%= taxon.id %>"><%= taxon.name %><i class="fa fa-plus"></i></a>
                      <ul id="taxon-<%= taxon.id %>" class="collapse collapseItem">
                        <% taxon.leaves.each do |taxon_2| %>
                          <li>
                            <a href="<%= potepan_category_path(taxon_id: taxon_2.id, view_type: view_type) %>">
                              <i class="fa fa-caret-right" aria-hidden="true"></i>
                              <%= taxon_2.name %> <span>( <%= taxon_2.product_ids.count %> )</span>
                            </a>
                          </li>
                        <% end %>
                      </ul>
                    </li>
                  <% end %>
                <% end %>
              </ul>
            </li>
          <% end %>
        </ul>
      </div>
    </div>
  </div>
  <div class="panel panel-default filterNormal">
    <div class="panel-heading">色から探す</div>
    <div class="panel-body">
      <ul class="list-unstyled">
        <li><a href="#">ブラック<span>(15)</span></a></li>
        <li><a href="#">ホワイト<span>(10)</span></a></li>
        <li><a href="#">レッド<span>(7)</span></a></li>
        <li><a href="#">ブルー<span>(12)</span></a></li>
        <li><a href="#">オレンジ<span>(12)</span></a></li>
      </ul>
    </div>
  </div>
  <div class="panel panel-default filterNormal">
    <div class="panel-heading">サイズから探す</div>
    <div class="panel-body">
      <ul class="list-unstyled clearfix">
        <li><a href="#">S<span>(15)</span></a></li>
        <li><a href="#">M<span>(10)</span></a></li>
        <li><a href="#">L<span>(7)</span></a></li>
        <li><a href="#">XL<span>(12)</span></a></li>
      </ul>
    </div>
  </div>
</div>
